FROM ubuntu:24.04

# Install ROS
COPY assets/install_ros.sh /tmp/install_ros.sh
RUN /tmp/install_ros.sh

# Install npm
ENV NVM_DIR="/usr/local/nvm"
ENV NODE_VERSION="24.11.1"
ENV PATH="/usr/local/nvm/versions/node/v${NODE_VERSION}/bin:${PATH}"
ENV NG_CLI_ANALYTICS="false"

COPY assets/install_npm.sh /tmp/install_npm.sh
RUN /tmp/install_npm.sh

# Install tauri
ENV CARGO_HOME=/home/ubuntu/.cargo
ENV RUSTUP_HOME=/home/ubuntu/.rustup
ENV PATH="${CARGO_HOME}/bin:${PATH}"
COPY assets/install_tauri.sh /tmp/install_tauri.sh
RUN /tmp/install_tauri.sh
RUN chmod -R a+rw $CARGO_HOME